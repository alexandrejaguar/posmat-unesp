%%
%% Customizações do abnTeX2 (http://abnTeX2.googlecode.com) para 
%% o Programa de Pós-Graduação de Ciência e Tecnologia em Materiais - POSMAT, 
%% Universidade Estadual Paulista - Unesp
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `maintained'.
%% 
%% The Current Maintainer of this work is Alexandre 'Jaguar' Fioravante de Siqueira, 
%% siqueiraaf@gmail.com
%%
%% Further information about abnTeX2 are available on http://abntex2.googlecode.com/
%%

%
% INICIO DAS CUSTOMIZACOES PARA O POSMAT - Unesp
%

%
% PACOTES UTILIZADOS
%

\usepackage{cmap}				% Mapear caracteres especiais no PDF
\usepackage{lmodern}			% Usa a fonte Latin Modern			
\usepackage[T1]{fontenc}		% Seleção de códigos de fonte.
\usepackage[utf8]{inputenc}		% Codificação do documento (conversão automática dos acentos)
\usepackage{lastpage}			% Usado pela Ficha catalográfica
\usepackage{indentfirst}		% Indenta o primeiro parágrafo de cada seção.
\usepackage[usenames,dvipsnames]{color}	% Controle das cores
\usepackage{graphicx}			% Inclusão de gráficos
%\usepackage{titlesec}			% Modificação necessária nos títulos - conflito
\usepackage{tikz}				% construção do capítulo
\usepackage{amsthm,amsfonts}	% Fontes matemáticas especiais
\usepackage{pdfpages}			% inserindo arquivos pdf no texto
\usepackage{pdflscape}			% formato paisagem real, diferente do lscape
\usepackage{hyperref}			% inserindo links azuis, referências em preto
\usepackage{caption}			% para inserir subcaptions
\usepackage{subfig}				% para subfigures
\usepackage{verbatim}
\usepackage{minted}				% para código diretamente no texto
\usepackage[brazilian,hyperpageref]{backref} % páginas com as citações na bibliografia
\usepackage[portuguese,linesnumbered,ruled,vlined]{algorithm2e} %% colocando algoritmos


% 
% PACOTES DE CITAÇÕES - BIBLIOGRAFIA (BIBTEX)
% 

\usepackage[brazilian,hyperpageref]{backref}	 % Paginas com as citações na bibl
\usepackage[alf]{abntex2cite}	% citações padrão ABNT alfabético
%\usepackage[num]{abntex2cite}	% citações padrão ABNT numérico


%
% RENOMEANDO FONTE PADRÃO PARA CMR EXTENDED
% MAIS FONTES EM 
%	http://www.n.ethz.ch/~rephilip/download/Studium%20usw/LaTeX/LaTeX%20fonts.pdf
%

\renewcommand{\ABNTEXchapterfont}{\fontfamily{cmr}\fontseries{bx}\selectfont}
\renewcommand{\ABNTEXchapterfontsize}{\large}


%
% SEÇÕES EM MAIÚSCULAS
%

% --------------------------------------------------------------------------
% MUDANDO IDIOMA PADRÃO
% --------------------------------------------------------------------------

\addto\captionsbrazil{
  \renewcommand{\chaptername}{CAPÍTULO}
  \renewcommand{\bibname}{REFERÊNCIAS}
  \renewcommand{\contentsname}{SUMÁRIO}
  \renewcommand{\folhaderostoname}{PÁGINA DE TÍTULO}
  \renewcommand{\epigraphname}{EPÍGRAFE}
  \renewcommand{\dedicatorianame}{DEDICATÓRIA}
  \renewcommand{\errataname}{ERRATA}
  \renewcommand{\agradecimentosname}{AGRADECIMENTOS}
  \renewcommand{\anexoname}{ANEXO}
  \renewcommand{\anexosname}{ANEXOS}
  \renewcommand{\appendixname}{APÊNDICE}
  \renewcommand{\apendicesname}{APÊNDICES}
  \renewcommand{\orientadorname}{ORIENTADOR:}
  \renewcommand{\coorientadorname}{COORIENTADOR:}
  \renewcommand{\folhadeaprovacaoname}{FOLHA DE APROVAÇÃO}
  \renewcommand{\resumoname}{RESUMO}
  \renewcommand{\listfigurename}{LISTA DE FIGURAS}
  \renewcommand{\listtablename}{LISTA DE TABELAS}
  \renewcommand{\listadesiglasname}{LISTA DE ABREVIATURAS E SIGLAS}
  \renewcommand{\listadesimbolosname}{LISTA DE SÍMBOLOS}
  \renewcommand{\fontename}{FONTE}
  \renewcommand{\notaname}{NOTA}
}

%% título da folha antes dos apêndices
\addto\captionsbrazil{\renewcommand{\apendicesname}{\HUGE{APÊNDICES}}}


%
% CABEÇALHO
%

\makepagestyle{cabecalho}
	\makeoddhead{cabecalho}
		{\bfseries\rightmark}
		{}
		{\thepage}
	\makeheadrule{cabecalho}
		{\textwidth}
		{\normalrulethickness}


%
% CAPA
%

\renewcommand{\imprimircapa}{%
  \begin{capa}%
    \center
    \ABNTEXchapterfont\Large{UNIVERSIDADE ESTADUAL PAULISTA -- UNESP \\ 
		Programa de Pós-Graduação em Ciência e Tecnologia de Materiais 
		-- POSMAT}
    
    \vspace*{2cm}
    
    {\ABNTEXchapterfont\large\imprimirautor}

    \vspace*{5cm}
    \ABNTEXchapterfont\bfseries\LARGE\imprimirtitulo
    \vfill
    
    \large\imprimirlocal

    \large\imprimirdata
    
    \vspace*{1cm}
  \end{capa}
}

% 
% CONFIGURAÇÕES DO PACOTE BACKREF
% Usado sem a opção hyperpageref de backref
%

\renewcommand{\backrefpagesname}{Citado na(s) página(s):~}
% Texto padrão antes do número das páginas
\renewcommand{\backref}{}
% Define os textos da citação
\renewcommand*{\backrefalt}[4]{
	\ifcase #1 %
		Nenhuma citação no texto.%
	\or
		Citado na página #2.%
	\else
		Citado #1 vezes nas páginas #2.%
	\fi}%


%
% ESTILO DOS CAPTIONS DE FIGURAS E TABELAS
%

\captionsetup[figure]{labelfont={bf,footnotesize},textfont={footnotesize}}
\captionsetup[table]{labelfont={bf,footnotesize},textfont={footnotesize}}
\captionsetup[subfloat]{labelfont={bf,footnotesize},textfont={footnotesize},subrefformat=parens} %<-----designing subcaption


%
% INFORMAÇÕES DO PDF
%

\makeatletter
\hypersetup{
     	%pagebackref=true,
		pdftitle = {\@title}, 
		pdfauthor = {\@author},
    	pdfsubject = {\imprimirpreambulo},
	    pdfcreator = {LaTeX with abnTeX2},
		pdfkeywords = {abnt}{latex}{abntex}{abntex2}{trabalho acadêmico}, 
		colorlinks = true,       		% false: boxed links; true: colored links
    	linkcolor = blue,          	% color of internal links
    	citecolor = blue,        		% color of links to bibliography
    	filecolor = magenta,      		% color of file links
		urlcolor = blue,
		bookmarksdepth = 4
}
\makeatother

%
% ALTERAÇÃO NO TÍTULO - Conflita com nomes em Anexos e Apêndices!
% ---
%\titleformat{\chapter}[hang]{\large\bfseries}{CAPÍTULO \thechapter\ -- }{0pt}{\large\bfseries}
%
% PROVISORIAMENTE - ESTILO BOX

\makechapterstyle{box}{
  \renewcommand*{\printchaptername}{}
  \renewcommand*{\chapnumfont}{\normalfont\normalfont\huge\bfseries}
  \renewcommand*{\printchapternum}{
    \flushright
    \begin{tikzpicture}
      \draw[fill,color=black] (0,0) rectangle (2cm,2cm);
      \draw[color=white] (1cm,1cm) node { \chapnumfont\thechapter };
    \end{tikzpicture}
  }
  \renewcommand*{\chaptitlefont}{\normalfont\normalfont\Large\bfseries}
  \renewcommand*{\printchaptertitle}[1]{\flushright\chaptitlefont##1}
}


%
% ALTERAÇÕES NO PACOTE ALGORITHM2E
%

\SetKwFor{Para}{para}{fa\c{c}a}{fim}
\SetKw{Return}{retorne}
\SetKwInput{KwIn}{Entrada}
\SetKwInput{KwOut}{Saída}

%
% DEFININDO CAPTION 'FANTASMA'
%

\makeatletter
\providecommand\phantomcaption{\caption@refstepcounter\@captype}
\makeatother


%
% FIM DAS CUSTOMIZACOES PARA O POSMAT - Unesp
%
